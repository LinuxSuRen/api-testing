#!api-testing
# yaml-language-server: $schema=https://linuxsuren.github.io/api-testing/api-testing-schema.json
# https://docs.gitlab.com/ee/api/api_resources.html
name: atest
api: http://localhost:8080/server.Runner
param:
  suiteName: test
  caseName: test
items:
- name: createSuite
  request:
    api: /CreateTestSuite
    method: POST
    body: |
      {
        "name": "{{.param.suiteName}}",
        "api": "http://localhost:8080/server.Runner"
      }
- name: createTestCase
  request:
    api: /CreateTestCase
    method: POST
    body: |
      {
        "suiteName": "{{.param.suiteName}}",
        "data": {
          "name": "{{.param.caseName}}",
          "request": {
            "api": "/GetTestSuite",
            "method": "POST",
            "header": [{
              "key": "auth",
              "value": "fake"
            }]
          }
        }
      }
